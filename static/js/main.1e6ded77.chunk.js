(this["webpackJsonpcontext-api"]=this["webpackJsonpcontext-api"]||[]).push([[0],{100:function(e,t,c){},108:function(e,t,c){},109:function(e,t,c){},111:function(e,t,c){},128:function(e,t,c){},130:function(e,t,c){},131:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c(3),s=c.n(n),i=c(27),r=c.n(i),o=(c(86),c(8)),l=(c(87),c(88),c(71)),j=c.n(l),d=c(72),u=c.n(d),b=c(17),h=Object(n.createContext)(),m=function(e){var t=e.reducer,c=e.initialState,s=e.children;return Object(a.jsx)(h.Provider,{value:Object(n.useReducer)(t,c),children:s})},O=function(){return Object(n.useContext)(h)},p=c(47),x=p.a.initializeApp({apiKey:"AIzaSyBgeXxOUuAGKfXWJFmhkoiSrDQMdAakZt0",authDomain:"clone-42bff.firebaseapp.com",projectId:"clone-42bff",storageBucket:"clone-42bff.appspot.com",messagingSenderId:"900749595371",appId:"1:900749595371:web:56784161adfb2f7d24a4ae",measurementId:"G-GC5GF49Q4Z"}).firestore(),_=p.a.auth();var g=function(){var e=O(),t=Object(o.a)(e,2),c=t[0],n=c.basket,s=c.user;return t[1],Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)(b.b,{to:"/",children:Object(a.jsx)("img",{className:"header__logo",src:"http://pngimg.com/uploads/amazon/amazon_PNG11.png",alt:"amazon"})}),Object(a.jsxs)("div",{className:"header__search",children:[Object(a.jsx)("input",{className:"header__searchInput",type:"text"}),Object(a.jsx)(j.a,{className:"header__searchIcon"})]}),Object(a.jsxs)("div",{className:"header__nav",children:[Object(a.jsx)(b.b,{to:!s&&"./login",children:Object(a.jsxs)("div",{className:"header__option",onClick:function(){s&&window.confirm("Are you sure to Sign out ?")&&_.signOut()},children:[Object(a.jsxs)("span",{className:"header__optionLine1",children:["Helow ",s?s.email:"Guest"]}),Object(a.jsx)("span",{className:"header__optionLine2",children:s?"SignOut":"Sign In"})]})}),Object(a.jsx)(b.b,{to:"/orders",children:Object(a.jsxs)("div",{className:"header__option header__disable",children:[Object(a.jsx)("span",{className:"header__optionLine1",children:"Returns"}),Object(a.jsx)("span",{className:"header__optionLine2",children:"& Orders"})]})}),Object(a.jsxs)("div",{className:"header__option header__disable",children:[Object(a.jsx)("span",{className:"header__optionLine1",children:"Your"}),Object(a.jsx)("span",{className:"header__optionLine2",children:"Prime"})]}),Object(a.jsx)(b.b,{to:"/checkout",children:Object(a.jsxs)("div",{className:"header__optionBasket",children:[Object(a.jsx)(u.a,{}),Object(a.jsx)("span",{className:"header__optionLine2 header__basketCount",children:n?n.length:0})]})})]})]})},v=(c(97),c(98),c(145));var f=function(e){var t=e.id,c=e.title,n=e.price,s=e.image,i=e.rating,r=O(),l=Object(o.a)(r,2),j=(l[0].basket,l[1]);return Object(a.jsx)("div",{className:"product",children:Object(a.jsxs)("div",{className:"product__info",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:c})}),Object(a.jsx)("div",{className:"product__rating",children:Object(a.jsx)(v.a,{name:"read-only",value:i,readOnly:!0})}),Object(a.jsxs)("p",{className:"product__price",children:[Object(a.jsx)("small",{children:"$"}),Object(a.jsx)("strong",{children:n})]}),Object(a.jsx)("img",{alt:"",src:s}),Object(a.jsx)("button",{onClick:function(){j({type:"ADD_TO_BASKET",item:{id:t,title:c,image:s,rating:i,price:n}})},children:"Add to Cart"})]})})};var N=function(){return Object(a.jsx)("div",{className:"home",children:Object(a.jsxs)("div",{className:"home__container",children:[Object(a.jsx)("img",{className:"home__image",alt:"",src:"https://images-eu.ssl-images-amazon.com/images/G/31/prime/Gateway/2020/May/gaming_1500x600._CB431281464_.jpg"}),Object(a.jsxs)("div",{className:"home__row",children:[Object(a.jsx)(f,{id:1,title:"Lenovo 18.5 inch Thinkvision D19-10 Flat Panel Monitor with HDMI",price:4879,rating:3,image:"https://m.media-amazon.com/images/I/51qDWNn7NaL._AC_UY218_.jpg"}),Object(a.jsx)(f,{id:2,title:"AGARO - 33184 Marvel 25-Litre Oven Toaster Grill",price:3798,rating:5,image:"https://images-eu.ssl-images-amazon.com/images/I/81jlhdJXsML._AC_UL270_SR270,270_.jpg"}),Object(a.jsx)(f,{id:3,title:"Amazon Brand - Solimo Wi-Fi Smart Light, 12W, B22 Holder",price:529,rating:3.2,image:"https://m.media-amazon.com/images/I/71bltWjd65L._AC_UL320_.jpg"}),Object(a.jsx)(f,{id:4,title:"Amazon Brand - Solimo Microfibre Reversible Comforter",price:769,rating:4,image:"https://m.media-amazon.com/images/I/91z-UC7wh4L._AC_UL320_.jpg"})]}),Object(a.jsx)("div",{className:"home__row"}),Object(a.jsx)("div",{className:"home__row"})]})})},y=c(11),k=(c(99),c(100),c(25)),S=c.n(k),C=c(48),A=c(22),E=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return Number(e)+Number(t.price)}),0)};var B=function(){var e=Object(y.f)(),t=O(),c=Object(o.a)(t,2),n=c[0].basket;return c[1],console.log("total",E),Object(a.jsxs)("div",{className:"subtotal",children:[Object(a.jsx)(S.a,{renderText:function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:["Subtotal (",null===n||void 0===n?void 0:n.length," items) : ",Object(a.jsx)("strong",{children:e})]}),Object(a.jsxs)("small",{className:"subtotal__gift",children:[Object(a.jsx)("input",{type:"checkbox"}),"This order contains a gift"]})]})},value:E(n),displayType:"text",thousandSeparator:!0,prefix:"$"}),Object(a.jsx)("button",{onClick:function(t){return e.push("/payment")},children:"Proceed to checkout"})]})},w=(c(102),c(73));c(108);var T=function(e){var t=e.id,c=e.image,n=e.title,s=e.price,i=e.rating,r=e.hideButton,l=O(),j=Object(o.a)(l,2),d=(j[0].basket,j[1]);return Object(a.jsxs)("div",{className:"CheckoutProduct",children:[Object(a.jsx)("img",{src:c,alt:"",className:"CheckoutProduct__image"}),Object(a.jsxs)("div",{className:"CheckoutProduct__info",children:[Object(a.jsx)("p",{className:"CheckoutProduct__title",children:n}),Object(a.jsxs)("p",{className:"CheckoutProduct__price",children:[Object(a.jsx)("small",{children:"$"}),Object(a.jsx)("strong",{children:s})]}),Object(a.jsx)("div",{className:"CheckoutProduct__rating",children:Object(a.jsx)(v.a,{name:"read-only",value:i,readOnly:!0})}),!r&&Object(a.jsx)("button",{onClick:function(){d({type:"REMOVE_FROM_BASKET",id:t})},children:"Remove from cart"})]})]})};var I=function(){var e=O(),t=Object(o.a)(e,2),c=t[0],n=c.basket,s=c.user;return t[1],Object(a.jsxs)("div",{className:"checkout",children:[Object(a.jsxs)(w.Carousel,{autoPlay:!0,children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{className:"home__image",alt:"",src:"https://images-eu.ssl-images-amazon.com/images/G/31/AmazonSaheli/SB-Top-banner-desktop-3000x600-v3.jpg"})}),Object(a.jsx)("div",{children:Object(a.jsx)("img",{className:"home__image",alt:"",src:"https://images-eu.ssl-images-amazon.com/images/G/31/img20/Audio/Hdpns_Gw_1500x600._CB415716258_.jpg"})}),Object(a.jsx)("div",{children:Object(a.jsx)("img",{className:"home__image",alt:"",src:"https://images-eu.ssl-images-amazon.com/images/G/31/img19/AmazonPay/Boson/Sid/CCBP/Nov/BAU/Credit-Card-Bill_1500x600_without._CB415288872_.jpg"})})]}),Object(a.jsxs)("div",{className:"checkout__bottom",children:[Object(a.jsx)("div",{className:"checkout__left",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"checkout__user",children:s?"Helow, ".concat(s.email):""}),Object(a.jsx)("h2",{className:"checkout__title",children:"Shopping Cart"}),n.length>0?n.map((function(e){return Object(a.jsx)(T,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating},e.id)})):Object(a.jsx)("h4",{children:"Your Cart is Empty"})]})}),Object(a.jsx)("div",{className:"checkout__right",children:Object(a.jsx)(B,{})})]})]})};c(109);var P=function(){var e=Object(y.f)(),t=Object(n.useState)(""),c=Object(o.a)(t,2),s=c[0],i=c[1],r=Object(n.useState)(""),l=Object(o.a)(r,2),j=l[0],d=l[1];return Object(a.jsxs)("div",{className:"login",children:[Object(a.jsx)(b.b,{to:"/",children:Object(a.jsx)("img",{className:"login__logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Amazon_logo.svg/800px-Amazon_logo.svg.png",alt:""})}),Object(a.jsxs)("div",{className:"login__container",children:[Object(a.jsx)("h1",{children:"Sign In"}),Object(a.jsxs)("form",{children:[Object(a.jsx)("h5",{children:"E-mail"}),Object(a.jsx)("input",{type:"text",value:s,onChange:function(e){return i(e.target.value)}}),Object(a.jsx)("h5",{children:"Password"}),Object(a.jsx)("input",{type:"password",value:j,onChange:function(e){return d(e.target.value)}}),Object(a.jsx)("button",{type:"submit",className:"login__signInButon",onClick:function(t){t.preventDefault(),_.signInWithEmailAndPassword(s,j).then((function(t){console.log(t),t&&e.push("/")})).catch((function(e){return alert(e.message)}))},children:"Sign In"})]}),Object(a.jsx)("p",{children:"By continuing, you agree to Amazon's Conditions of Use and Privacy Notice."}),Object(a.jsx)("button",{className:"login__registerButon",onClick:function(t){t.preventDefault(),_.createUserWithEmailAndPassword(s,j).then((function(t){console.log(t),t&&e.push("/")})).catch((function(e){return alert(e.message)}))},children:"Create your Amazon account"})]})]})},z=c(33),L=c.n(z),M=c(46),D=c(24),R=(c(111),c(74)),G=c.n(R).a.create({baseURL:"http://localhost:5001/clone-42bff/us-central1/api"});var U=function(){var e=Object(y.f)(),t=O(),c=Object(o.a)(t,2),s=c[0],i=s.user,r=s.basket,l=c[1],j=Object(D.useStripe)(),d=Object(D.useElements)(),u=Object(n.useState)(!1),h=Object(o.a)(u,2),m=h[0],p=h[1],_=Object(n.useState)(""),g=Object(o.a)(_,2),v=g[0],f=g[1],N=Object(n.useState)(null),k=Object(o.a)(N,2),C=k[0],A=k[1],B=Object(n.useState)(!0),w=Object(o.a)(B,2),I=w[0],P=w[1],z=Object(n.useState)(!0),R=Object(o.a)(z,2),U=R[0],F=R[1];Object(n.useEffect)((function(){(function(){var e=Object(M.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G({method:"post",url:"/payments/create?total=".concat(100*E(r))});case 2:t=e.sent,F(t.data.clientSecret);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]),console.log("secret --",U);var Y=function(){var t=Object(M.a)(L.a.mark((function t(c){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),f(!0),t.next=4,j.confirmCardPayment(U,{payment_method:{card:d.getElement(D.CardElement)}}).then((function(t){var c=t.paymentIntent;x.collection("users").doc(null===i||void 0===i?void 0:i.uid).collection("orders").doc(c.id).set({basket:r,amount:c.amount,created:c.created}),p(!0),A(null),f(!1),l({type:"EMPTY_BASKET"}),e.replace("/orders")}));case 4:t.sent;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"payment",children:Object(a.jsxs)("div",{className:"payment__container",children:[Object(a.jsxs)("h1",{children:["Checkout ( ",Object(a.jsxs)(b.b,{to:"/checkout",children:[null===r||void 0===r?void 0:r.length," items"]}),")"]}),Object(a.jsxs)("div",{className:"payment__section",children:[Object(a.jsx)("div",{className:"payment__title",children:Object(a.jsx)("h3",{children:"Delivery Address"})}),Object(a.jsxs)("div",{className:"payment__address",children:[Object(a.jsx)("p",{children:null===i||void 0===i?void 0:i.email}),Object(a.jsx)("p",{children:"Sulthan Bathery, Wayanad"}),Object(a.jsx)("p",{children:"Kerala, India"})]})]}),Object(a.jsxs)("div",{className:"payment__section",children:[Object(a.jsx)("div",{className:"payment__title",children:Object(a.jsx)("h3",{children:"Payment Method"})}),Object(a.jsx)("div",{className:"payment__details",children:Object(a.jsxs)("form",{onSubmit:Y,children:[Object(a.jsx)(D.CardElement,{onChange:function(e){P(e.empty),A(e.error?e.error.message:"")}}),Object(a.jsxs)("div",{className:"payment__priceContainer",children:[Object(a.jsx)(S.a,{renderText:function(e){return Object(a.jsxs)("h3",{children:["Order Total: ",e," "]})},value:E(r),displayType:"text",thousandSeparator:!0,prefix:"\u20b9"}),Object(a.jsx)("button",{disabled:v||I||m,children:Object(a.jsx)("span",{children:v?Object(a.jsx)("p",{children:"Processing"}):"Buy Now"})})]}),C&&Object(a.jsx)("div",{children:C})]})})]}),Object(a.jsxs)("div",{className:"payment__section",children:[Object(a.jsx)("div",{className:"payment__title",children:Object(a.jsx)("h3",{children:"Review Items and Delivery"})}),Object(a.jsx)("div",{className:"payment__items",children:r.length>0?r.map((function(e){return Object(a.jsx)(T,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating},e.id)})):Object(a.jsx)("h4",{children:"Your Cart is Empty"})})]})]})})},F=c(75),Y=(c(128),c(76)),K=c.n(Y);var W=function(e){var t,c=e.order;return console.log("sdfsgsfg"),Object(a.jsxs)("div",{className:"order",children:[Object(a.jsx)("h2",{children:"Order"}),Object(a.jsx)("p",{children:K.a.unix(c.data.created).format("MMMM Do YYYY, h:mma")}),Object(a.jsx)("p",{className:"order__id",children:c.id}),null===(t=c.data.basket)||void 0===t?void 0:t.map((function(e){return Object(a.jsx)(T,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating,hideButton:!0},e.id)})),Object(a.jsx)(S.a,{renderText:function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("h3",{className:"order__total",children:["Order Total : ",e," "]})})},value:c.data.amount/100,displayType:"text",thousandSeparator:!0,prefix:"\u20b9"})]})};c(130);var H=function(){var e=O(),t=Object(o.a)(e,2),c=t[0].user,s=(t[1],Object(n.useState)([])),i=Object(o.a)(s,2),r=i[0],l=i[1];return Object(n.useEffect)((function(){c?x.collection("users").doc(null===c||void 0===c?void 0:c.uid).collection("orders").orderBy("created","desc").onSnapshot((function(e){l(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})):l([])}),[c]),console.log("orderss",r),Object(a.jsxs)("div",{className:"orders",children:[Object(a.jsx)("h1",{children:"Your Orders"}),Object(a.jsx)("div",{className:"orders__order",children:null===r||void 0===r?void 0:r.map((function(e){return Object(a.jsx)(W,{order:e})}))})]})},J=Object(F.a)("pk_test_51HzOrCDAemgo5Q1JLsHPZacWCTj29COrZErOS2SylrtdKtipF1SBLIMsfnIIXVyL5sjTBTB6rCLeu6IzUYkJ89dM002vlEMPAa");var X=function(){var e=O(),t=Object(o.a)(e,2),c=(t[0].user,t[1]);return Object(n.useEffect)((function(){_.onAuthStateChanged((function(e){console.log("uswrrrr",e),c(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[]),Object(a.jsx)(b.a,{children:Object(a.jsx)("div",{className:"app",children:Object(a.jsxs)(y.c,{children:[Object(a.jsx)(y.a,{path:"/login",children:Object(a.jsx)(P,{})}),Object(a.jsxs)(y.a,{path:"/checkout",children:[Object(a.jsx)(g,{}),Object(a.jsx)(I,{})]}),Object(a.jsxs)(y.a,{path:"/payment",children:[Object(a.jsx)(g,{}),Object(a.jsx)(D.Elements,{stripe:J,children:Object(a.jsx)(U,{})})]}),Object(a.jsxs)(y.a,{path:"/orders",children:[Object(a.jsx)(g,{}),Object(a.jsx)(H,{})]}),Object(a.jsxs)(y.a,{path:"/",children:[Object(a.jsx)(g,{}),Object(a.jsx)(N,{})]})]})})})},Z=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,147)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),s(e),i(e)}))};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(m,{initialState:{basket:[],user:null},reducer:function(e,t){switch(console.log(t),t.type){case"ADD_TO_BASKET":return Object(A.a)(Object(A.a)({},e),{},{basket:[].concat(Object(C.a)(e.basket),[t.item])});case"REMOVE_FROM_BASKET":var c=e.basket.findIndex((function(e){return e.id==t.id}));console.log("index",c);var a=Object(C.a)(e.basket);return c>=0?a.splice(c,1):console.warn("product id - ".concat(t.id," not found")),Object(A.a)(Object(A.a)({},e),{},{basket:a});case"SET_USER":return Object(A.a)(Object(A.a)({},e),{},{user:t.user});case"EMPTY_BASKET":return Object(A.a)(Object(A.a)({},e),{},{basket:[]});default:return e}},children:Object(a.jsx)(X,{})})}),document.getElementById("root")),Z()},86:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){},97:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[131,1,2]]]);
//# sourceMappingURL=main.1e6ded77.chunk.js.map